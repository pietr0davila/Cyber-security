# Aula 4

## O que é um Shell?

Em um sistema linux, shell é um programa que recebe entradas do usuário via teclado e envia essas entradas ao sistema operacional para fazer determinada ação

**Curiosidade: 
I. Uma abreviação muito usada para se referir a um shell é CLI (Command Line Interface) ou só Command line<br>II. No começo da internet, a única forma de interagir com o computador era usando shells, já que não existiam aplicações de interfaces gráficas (GUI)

O terminal do Linux (ou até do windows) é um exemplo de shell

### Bash

Sistemas linux usam BASH (Bourne Again shell), que é um shell para comunicação terminal > OS. O bash é considerado uma versão aprimorada do Sh. Além do bash existem outros exemplos de shells, incluindo mas não se limitando a:

1. [Z-shell](https://en.wikipedia.org/wiki/Z_shell)
2. [Tcsh](https://en.wikipedia.org/wiki/Tcsh)
3.  [KornShell](https://en.wikipedia.org/wiki/KornShell)
4.  [Fish Shell](https://en.wikipedia.org/wiki/Fish_(Unix_shell))

A expressão "Get a shell" ou "ter um shell" em uma "box" é o mesmo que dizer que uma máquina foi invadida e conseguimos um shell de acesso no sistema, isso significa que podemos interagir com o sistema, mesmo que limitadamente, existem 2 formas de obter um shell. Explorando vulnerabilidades e forçando a conexão ou obtendo credenciais e se conectando remotamente a uma máquina


#### Tipos de Shell


| Tipo de shell                  | Descrição                                                       |
| ------------------------------ | --------------------------------------------------------------- |
| [Reverse shell](shell1_rev.md) | A máquina atacada inicia a conexão com o atacan                 |
| [Bind shell](shell2_bind.md)   | Entra em uma porta do alvo e aguarda cone                       |
| [Web shell](shell3_web.md)     | Executa comandos do shell no navegador com comandos individuais |

## Portas

Na computação, uma porta é uma conexão entre redes com começo e fim. Elas são gerenciadas pelo sistema, cada porta é associada a um processo ou serviço e permite que o computador diferencie o tráfego que entra e saí

Cada porta tem um número atribuído e muitas delas são padronizadas para todos os dispositivos conectados a rede, ao mesmo tempo essa porta padrão pode ser alterada. por exemplo o serviço HTTP, que roda na porta 80 e o serviço HTTPS roda na porta 443 por padrão, você pode alterar a porta do HTTP para 4441 e a do HTTPS para 60000

Existem dois tipos de portas

TCP (Transmission control protocol) e UDP (user datagram protocol)

No TCP, os dados não são enviados até que a conexão seja estabelecida, então o servidor fica em estado de escuta aguardando a conexão

Nas portas UDP isso não existe, não existe *handshake\** , então não existe nenhuma garantia de que os dados vão ser entregues. O UDP é comum quando não existe verificação de erros ou quando essa verificação é feita pela aplicação. Existem 65.535 portas TCP e 65.535 portas UDP, as mais conhecidas são:


| Porta (Padrão) | Protocolo       |
| -------------- | --------------- |
| 20/21 TCP      | FTP             |
| 22 TCP         | SSH             |
| 23 TCP         | Telnet          |
| 25 TCP         | SMTP            |
| 80 TCP         | HTTP            |
| 161 TCP/UDP    | SNMP            |
| 389 TCP/UDP    | LDAP            |
| 443 TCP        | SSL/TLS (HTTPS) |
| 445 TCP        | SMB             |
| 3389           | RDP             |

Pentesters precisam conhecer muitas portas TCP/UDP e conhecer protocolos só pelo número. 

<!-- 
https://www.stationx.net/common-ports-cheat-sheet/ 
https://web.archive.org/web/20240714182826/https://packetlife.net/media/library/23/common-ports.pdf
https://nullsec.us/top-1-000-tcp-and-udp-ports-nmap-default/
-->

---
## Web-Server

Um servidor web é uma aplicação no back-end que lida com tráfego HTTP, ele encamina o navegador para a página solicitada ou exibe um erro caso ela não exista

| N° Da vuln. | Categoria                                 | Descrição                                                                                                                                                               |
| ----------- | ----------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1.          | Broken access Control                     | Restrições mal implementadas para que usuários não acessem dados de outros sem autorização                                                                              |
| 2.          | Cryptographic Failures                    | Acontece quando um sistema criptografado tem dados vazados ou é comprometido                                                                                            |
| 3.          | Injection                                 | As entradas que o usuário fornece não são tratadas ou validadas, alguns exemplos são SQL injection, injeção de comandos e outras                                        |
| 4.          | Insecure Design                           | Acontecem quando o design da aplicação não é seguro                                                                                                                     |
| 5.          | Security misconfiguration                 | Falta de segurança apropriada na aplicação, como configuração padrão insegura, armazenamento na nuvem aberto, mensagens de erro descritivas demais                      |
| 6.          | Vulnerable and outdated components        | Usar componentes (servidor ou cliente) desatualizados                                                                                                                   |
| 7.          | Software and data integrity               | Quando a integridade dos dados e do próprio software são violáveis, um exemplo é a implementação de CDNs (Content delivery networks) de fontes não confiáveis           |
| 8.          | Logging and Monitoring failure            | Logs existem para depuração, são usados no desenvolvimento tanto para tratamento de erros tanto para encontrar brechas                                                  |
| 9.          | Identification and authentication failure | Ataques que passam por cima de mecanismos de identificação como senhas e autenticação como 2FA                                                                          |
| 10.         | Server-side client forgery                | Acontece quando o website busca um recurso interno ou externo sem validar a URL do usuário, resulta em vazamentos, acesso não autorizado ou remote code execution (RCE) |

[hackthebox.com](../../README.md)
[Próxima aula](5_Ferramentas.md)